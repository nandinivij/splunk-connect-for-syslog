<!DOCTYPE html>

<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="../img/favicon.ico" rel="shortcut icon"/>
<title>Read First - test</title>
<link href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" rel="stylesheet">
<link href="../css/theme.css" rel="stylesheet"/>
<link href="../css/theme_extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet"/>
<script>
    // Current page data
    var mkdocs_page_name = "Read First";
    var mkdocs_page_input_path = "gettingstarted/index.md";
    var mkdocs_page_url = null;
  </script>
<script defer="" src="../js/jquery-2.1.1.min.js"></script>
<script defer="" src="../js/modernizr-2.8.3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</link><link href="index.pdf" rel="alternate" title="PDF Export" type="application/pdf"/></head>
<body class="wy-body-for-nav" role="document">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side stickynav" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href=".."> test</a>
<div role="search">
<form action="../search.html" class="wy-form" id="rtd-search-form" method="get">
<input name="q" placeholder="Search docs" title="Type search term here" type="text"/>
</form>
</div>
</div>
<div aria-label="main navigation" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul>
<li class="toctree-l1"><a class="reference internal" href="..">Home</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal current" href="./">Read First</a>
<ul class="current">
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#planning-deployment">Planning Deployment</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#implementation">Implementation</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#splunk-setup">Splunk Setup</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#create-indexes">Create Indexes</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#install-related-splunk-apps">Install Related Splunk Apps</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#configure-the-splunk-http-event-collector">Configure the Splunk HTTP Event Collector</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#implement-a-container-runtime-and-sc4s">Implement a Container Runtime and SC4S</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">Prerequisites</a>
</li>
<li class="toctree-l4"><a class="reference internal" href="#select-a-container-runtime-and-sc4s-configuration">Select a Container Runtime and SC4S Configuration</a>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#offline-container-installation">Offline Container Installation</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="" href="podman-systemd-general.md">Podman + systemd</a>
</li>
<li class="toctree-l1"><a class="" href="docker-systemd-general.md">Docker CE + systemd</a>
</li>
<li class="toctree-l1"><a class="" href="docker-swarm-general.md">Docker CE + Swarm</a>
</li>
<li class="toctree-l1"><a class="" href="docker-swarm-rhel7.md">Docker CE + Swarm RHEL 7.7</a>
</li>
<li class="toctree-l1"><a class="" href="byoe-rhel7.md">Bring your own Envionment</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart/">Quickstart</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="" href="../configuration.md">Configuration</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developing/">Development</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sources/">About</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/Brocade/">Brocade</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/Checkpoint/">Checkpoint</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/Cisco/">Cisco</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/Citrix/">Citrix</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/CommonEventFormat/">Common Event Format</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/CyberArk/">CyberArk</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/Dell_RSA/">Dell RSA</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/F5/">F5</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/Forcepoint/">Forcepoint</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/Fortinet/">Fortinet</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/Imperva/">Imperva</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/InfoBlox/">InfoBlox</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/Juniper/">Juniper</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/McAfee/">McAfee</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/Microfocus/">Microfocus</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/nix/">Nix</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/PaloaltoNetworks/">Palo Alto Networks</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/Pfsense/">pfSense</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/Proofpoint/">Proofpoint</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/Schneider/">Schneider</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/Symantec/">Symantec</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/Ubiquiti/">Ubiquiti</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/VMWare/">VMware</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sources/Zscaler/">Zscaler</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="" href="../performance.md">Performance</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="" href="../troubleshooting.md">Troubleshooting</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="" href="../upgrade.md">Upgrading SC4S</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="" href="../faq.md">SC4S FAQ</a>
</li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
<nav aria-label="top navigation" class="wy-nav-top" role="navigation">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="..">test</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content">
<div aria-label="breadcrumbs navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a href="..">Docs</a> »</li>
<li>Getting Started »</li>
<li>Read First</li>
<li class="wy-breadcrumbs-aside">
</li>
</ul>
<hr/>
</div>
<div role="main">
<div class="section">
<h1 id="before-you-start">Before you start<a class="headerlink" href="#before-you-start" title="Permanent link">¶</a></h1>
<h2 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">¶</a></h2>
<p>Splunk Connect for Syslog is a containerized distribution of syslog-ng with a configuration framework
designed to simplify getting syslog data into Splunk Enterprise and Splunk Cloud. Our approach is
to provide a runtime-agnostic solution allowing customers to deploy using the container runtime
environment of choice.</p>
<h2 id="planning-deployment">Planning Deployment<a class="headerlink" href="#planning-deployment" title="Permanent link">¶</a></h2>
<p>Syslog is an overloaded term that refers to multiple message formats AND optionally a wire protocol for
transmission of events between computer systems over UDP, TCP, or TLS. The protocol is designed to minimize
overhead on the sender favoring performance over reliability. This fundamental choice means any instability
or resource constraint will cause data to be lost in transmission.</p>
<ul>
<li>
<p>When practical and cost effective (considering the importance of completeness as a requirement), place the sc4s
instance in the same VLAN as the source device.</p>
</li>
<li>
<p>Avoid crossing a Wireless network, WAN, Firewall, Load Balancer, or inline IDS.</p>
</li>
<li>When High Availability of a single instance of SC4S is required, implement multi node clustering of the container
environment.</li>
<li>Avoid TCP except where the source is unable to contain the event to a single UDP packet.</li>
<li>Avoid TLS except where the event may cross a untrusted network.</li>
<li>Plan for <a href="../performance.md">appropriately sized hardware</a></li>
</ul>
<h2 id="implementation">Implementation<a class="headerlink" href="#implementation" title="Permanent link">¶</a></h2>
<h3 id="splunk-setup">Splunk Setup<a class="headerlink" href="#splunk-setup" title="Permanent link">¶</a></h3>
<h4 id="create-indexes">Create Indexes<a class="headerlink" href="#create-indexes" title="Permanent link">¶</a></h4>
<p>SC4S is pre-configured to map each sourcetype to a typical index. For new installations, it is best practice to create them in Splunk when
using the SC4S defaults. SC4S can be easily customized to use different indexes if desired.</p>
<ul>
<li>email</li>
<li>netauth</li>
<li>netfw</li>
<li>netids</li>
<li>netops</li>
<li>netwaf</li>
<li>netproxy</li>
<li>netipam</li>
<li>oswinsec</li>
<li>osnix</li>
<li>em_metrics (ensure this is created as a metrics index)</li>
</ul>
<h4 id="install-related-splunk-apps">Install Related Splunk Apps<a class="headerlink" href="#install-related-splunk-apps" title="Permanent link">¶</a></h4>
<p>Install the following:</p>
<ul>
<li><a href="https://splunkbase.splunk.com/app/3975/">Splunk App for Infrastructure</a></li>
<li><a href="https://splunkbase.splunk.com/app/4217/">Splunk Add-on for Infrastructure</a></li>
<li><a href="https://splunkbase.splunk.com/app/4192/">Splunk Metrics Workspace</a> <em>NOTE Included in Splunk 7.3.0 and above</em></li>
</ul>
<h4 id="configure-the-splunk-http-event-collector">Configure the Splunk HTTP Event Collector<a class="headerlink" href="#configure-the-splunk-http-event-collector" title="Permanent link">¶</a></h4>
<ul>
<li>Set up the Splunk HTTP Event Collector with the HEC endpoints behind a load balancer (VIP) configured for https round robin <em>WITHOUT</em> sticky
session.  Alternatively, a list of HEC endpoint URLs can be configured in SC4S (native Syslog-ng load balancing) if no load balancer is in place.  In either case, it is
recommended that SC4S traffic be sent to HEC endpoints configured directly on the indexers rather than an intermediate tier of HWFs. Deployments with 10 or fewer Indexers and where HEC is used exclusively for syslog, the recommendation is to use the native load balancing. In all other scenarios the recommendation is to use an external load balacer. If utilizing the native load balancing, be sure to update the configuration when the number and/or names of the indexers change.</li>
<li>
<p>Create a HEC token that will be used by SC4S and ensure the token has access to place events in main, em_metrics, and all indexes used as
event destinations.</p>
<ul>
<li>NOTE: It is recommended that the “Selected Indexes” on the token configuration page be left blank so that the token has access to
<em>all</em> indexes, including the <code>lastChanceIndex</code>.  If this list is populated, extreme care must be taken to keep it up to date, as an attempt to
send data to an index not in this list will result in a <code>400</code> error from the HEC endpoint. Furthermore, the <code>lastChanceIndex</code> will <em>not</em> be
consulted in the event the index specified in the event is not configured on Splunk.  Keep in mind just <em>one</em> bad message will “taint” the
whole batch (by default 1000 events) and prevent the entire batch from being sent to Splunk.</li>
</ul>
</li>
<li>
<p>Refer to <a href="http://docs.splunk.com/Documentation/Splunk/7.3.1/Data/UsetheHTTPEventCollector#Configure_HTTP_Event_Collector_on_managed_Splunk_Cloud">Splunk Cloud</a>
or <a href="http://dev.splunk.com/view/event-collector/SP-CAAAE6Q">Splunk Enterprise</a> for specific HEC configuration instructions based on your
Splunk type.</p>
</li>
</ul>
<h3 id="implement-a-container-runtime-and-sc4s">Implement a Container Runtime and SC4S<a class="headerlink" href="#implement-a-container-runtime-and-sc4s" title="Permanent link">¶</a></h3>
<h4 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">¶</a></h4>
<ul>
<li>Linux host with Docker (CE 19.x or greater with Docker Swarm) or Podman enabled, depending on runtime choice (below).</li>
<li>A network load balancer (NLB) configured for round robin. Note: Special consideration may be required when more advanced products are used. The optimal configuration of the load balancer will round robin each http POST request (not each connection).</li>
<li>The host linux OS receive buffer size should be tuned to match the sc4s default to avoid dropping events (packets) at the network level.
The default receive buffer for sc4s is set to 16 MB for UDP traffic, which should be OK for most environments.  To set the host OS kernel to
match this, edit <code>/etc/sysctl.conf</code> using the following whole-byte values corresponding to 16 MB:</li>
</ul>
<pre class="codehilite"><code class="language-bash">net.core.rmem_default = 1703936
net.core.rmem_max = 1703936</code></pre>
<p>and apply to the kernel:</p>
<pre class="codehilite"><code class="language-bash">sysctl -p</code></pre>
<ul>
<li>Ensure the kernel is not dropping packets by periodically monitoring the buffer with the command
<code>netstat -su | grep "receive errors"</code>.</li>
<li>NOTE: Failure to account for high-volume traffic (especially UDP) by tuning the kernel will result in message loss, which can be <em>very</em>
unpredictable and difficult to detect. See this helpful discusion in the syslog-ng
<a href="https://www.syslog-ng.com/technical-documents/doc/syslog-ng-premium-edition/7.0.10/collecting-log-messages-from-udp-sources">Professional Edition</a>
documentation regarding tuning syslog-ng in particular (via the <a href="../configuration.md#syslog-source-configuration">SC4S_SOURCE_UDP_SO_RCVBUFF</a>
environment variable in sc4s) as well as overall host kernel tuning.  The default values for receive kernel buffers in most distros is 2 MB,
which has proven inadequate for many.</li>
</ul>
<h4 id="select-a-container-runtime-and-sc4s-configuration">Select a Container Runtime and SC4S Configuration<a class="headerlink" href="#select-a-container-runtime-and-sc4s-configuration" title="Permanent link">¶</a></h4>
<table>
<thead>
<tr>
<th>Container Runtime and Orchestration</th>
<th>Operating Systems</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="podman-systemd-general.md">Podman 1.7 &amp; 1.9 + systemd</a></td>
<td>RHEL or CentOS 8.1 &amp; 8.2 (best option), Debian or Ubuntu 18.04LTS</td>
</tr>
<tr>
<td><a href="docker-systemd-general.md">Docker CE 18 &amp; 19 + systemd</a></td>
<td>RHEL or CentOS 7.7 (best option), Debian or Ubuntu 18.04LTS</td>
</tr>
<tr>
<td><a href="docker-swarm-general.md">Docker CE 18 &amp; 19 + Swarm</a></td>
<td>CentOS 7.7 (best option), Debian or Ubuntu 18.04LTS</td>
</tr>
<tr>
<td><a href="docker-swarm-rhel7.md">Docker CE 18 &amp; 19 + Swarm</a></td>
<td>RHEL 7.7</td>
</tr>
<tr>
<td><a href="byoe-rhel7.md">Bring your own Envionment</a></td>
<td>RHEL or CentOS 8.1 &amp; 8.2 (best option)</td>
</tr>
</tbody>
</table>
<h3 id="offline-container-installation">Offline Container Installation<a class="headerlink" href="#offline-container-installation" title="Permanent link">¶</a></h3>
<p>Follow these instructions to “stage” SC4S by downloading the container so that it can be loaded “out of band” on a
host machine, such as an airgapped system, without internet connectivity.</p>
<ul>
<li>Download container image “oci_container.tgz” from our <a href="https://github.com/splunk/splunk-connect-for-syslog/releases">Github Page</a>. The following example downloads v1.12; replace the URL with the latest release or pre-release version as desired.</li>
</ul>
<pre class="codehilite"><code>sudo wget https://github.com/splunk/splunk-connect-for-syslog/releases/download/v1.12.0/oci_container.tar.gz</code></pre>
<ul>
<li>Distribute the container to the airgapped host machine using an appropriate file transfer utility.</li>
<li>Execute the following command, using docker or podman as appropriate</li>
</ul>
<pre class="codehilite"><code>&lt;podman or docker&gt; load &lt; oci_container.tar.gz</code></pre>
<ul>
<li>Note the container ID of the resultant load</li>
</ul>
<pre class="codehilite"><code>Loaded image: docker.pkg.github.com/splunk/splunk-connect-for-syslog/ci:90196f77f7525bc55b3b966b5fa1ce74861c0250</code></pre>
<ul>
<li>Use the container ID to create a local label</li>
</ul>
<pre class="codehilite"><code>&lt;podman or docker&gt; tag docker.pkg.github.com/splunk/splunk-connect-for-syslog/ci:90196f77f7525bc55b3b966b5fa1ce74861c0250 sc4slocal:latest</code></pre>
<ul>
<li>Use this local label <code>sc4slocal:latest</code> in the relevant unit or yaml file to launch SC4S (see the runtime options
above) by setting the <code>SC4S_IMAGE</code> environment variable in the unit file (example below), or the relevant <code>image:</code> tag
if using Docker Compose/Swarm.  Using this label will cause the runtime to select the locally loaded image, and will not
attempt to obtain the container image via the internet.</li>
</ul>
<pre class="codehilite"><code>Environment="SC4S_IMAGE=sc4slocal:latest"</code></pre>
</div>
</div>
<footer>
<div aria-label="footer navigation" class="rst-footer-buttons" role="navigation">
<a class="btn btn-neutral float-right" href="quickstart/" title="Quickstart">Next <span class="icon icon-circle-arrow-right"></span></a>
<a class="btn btn-neutral" href=".." title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
</div>
<hr/>
<div role="contentinfo">
<!-- Copyright etc -->
</div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
</div>
</div>
</section>
</div>
<div aria-label="versions" class="rst-versions" role="note">
<span class="rst-current-version" data-toggle="rst-current-version">
<span><a href=".." style="color: #fcfcfc;">« Previous</a></span>
<span style="margin-left: 15px"><a href="quickstart/" style="color: #fcfcfc">Next »</a></span>
</span>
</div>
<script>var base_url = '..';</script>
<script defer="" src="../js/theme.js"></script>
<script defer="" src="../search/main.js"></script>
<script defer="">
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>
</body>
</html>
